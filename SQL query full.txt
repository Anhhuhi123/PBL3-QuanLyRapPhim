CREATE Table NguoiDung(
	Id varchar(10) primary key ,
	Fullname nvarchar(MAX) ,
	SoDt varchar(10) not null,
	Email varchar(MAX),
	Vaitro nvarchar(20) not null,
)
CREATE TABLE KhachHang(
	Id varchar (10) primary key,
	Foreign key(Id) references NguoiDung(Id),
)
Create Table NhanVien(
	Id varchar(10) primary key,
	Active bit,
	foreign key(Id) references NguoiDung(Id),
)
CREATE TABLE TaiKhoan(
	TenTK varchar(10) primary key,
	MatKhau nvarchar(100),
	Foreign key (TenTK) references NhanVien(Id),
)
Create Table NhanVienQuanLy(
	Id varchar(10) primary key,
	foreign key(Id) references NhanVien(Id),
)

Create Table NhanVienBanHang(
	Id varchar(10) primary key,
	KPI int ,
	foreign key (Id) references NhanVien(Id),
)

Create table PhongChieu(
	Id int primary key,
	Name nvarchar(MAX) not null,
	Succhua int not null,
	Mota nvarchar(MAX) ,
)
Create Table Phim(
	Id int primary key,
	TenPhim nvarchar(MAX) not null,
	LoaiPhim nvarchar(MAX) not null,
	ThoiLuong int not null,
	Mota nvarchar(Max),
)
Create table LichChieu(
	Id int primary key,
	IdPhim int not null,
	IdNVQL varchar(10) not null ,
	NgayChieu date not null,
	GioChieu int not null,
	Foreign key (IdPhim) references Phim(Id),
	Foreign key(IdNVQL) references	NhanVienQuanLy(Id),
)
Create Table VeDuocDat(
	Id int primary key,
	Tongtien float,
	IdLichChieu int not null,
	SoVe int,
	Foreign key(IdLichChieu) references LichChieu(Id),
)
Create Table GheNgoi(
	Id int,
	IdPhong int,
	IdLichChieu int,
	TrangThai bit,
	IdVeDuocDat int,
	primary key(Id, IdPhong,IdLichChieu),
	Foreign key(IdPhong) references PhongChieu(Id),
	Foreign key(IdLichChieu) references LichChieu(Id),
	Foreign key(IdVeDuocDat) references VeDuocDat(Id)
	on delele SET null,
)
Create table LichChieu_PhongChieu(
	IdPhongChieu int,
	IdLichChieu int,
	Primary key(IdPhongChieu,IdLichChieu),
	Foreign key (IdPhongChieu) references PhongChieu(Id),
	Foreign key (IdLichChieu) references LichChieu(Id),
)

Create Table HoaDon(
	Id int primary key,
	TongTien float,
	GhiChu varchar(MAX),
	IdNVBH varchar(10) not null,
	IdKhachHang varchar(10) not null,
	IdVeDuocDat int not null,
	Foreign key (IdNVBH) references NhanVienBanHang(Id),
	Foreign key (IdKhachHang) references KhachHang(Id),
	Foreign key (IdVeDuocDat) references VeDuocDat(Id),
)
Create Table DoanhThu(
	TongDoanhThu Float,
	IdHoaDon int not null,
	Foreign key (IdHoaDon) references HoaDon(Id),
)
Create Table MonAn(
	Id int primary key,
	TenMon nvarchar(max),
	GiaTien float,
)
cREATE tABLE ChiTietHoaDon(
	IdHoaDon int,
	IdMonAn int,
	SoLuongMonAn int,
	Foreign key (IdHoaDon) references HoaDon(Id),
	Foreign key (IdHoaDon) references HoaDon(Id),
	Primary key(IdHoaDon,IdMonAn)
)